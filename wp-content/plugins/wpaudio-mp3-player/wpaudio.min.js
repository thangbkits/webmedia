_wpaudio.css={inline:{".wpaudio-container":{display:"inline-block","font-family":"Sans-serif","line-height":1,zoom:1},".wpaudio-container a":{color:_wpaudio.style.link_color,"text-decoration":"none"},".wpaudio-container .wpaudio":{"font-family":_wpaudio.style.text_font,"font-size":_wpaudio.style.text_size,"font-weight":_wpaudio.style.text_weight,"letter-spacing":_wpaudio.style.text_letter_spacing},".wpaudio-play":{display:"inline-block",margin:"0 5px 0 0",width:"14px",height:"13px",background:"#ccc","vertical-align":"baseline"},".wpaudio-slide":{display:"none"},".wpaudio-bar":{position:"relative",margin:"2px 0 0 19px",height:"5px","font-size":"1px",background:_wpaudio.style.bar_base_bg},".wpaudio-bar-playable":{position:"absolute",top:0,left:0,right:"100%",height:"5px","z-index":11,background:_wpaudio.style.bar_load_bg},".wpaudio-bar-position":{position:"absolute",top:0,left:0,right:"100%",height:"5px","z-index":12,background:_wpaudio.style.bar_position_bg},".wpaudio-bar-click":{position:"absolute",top:0,left:0,right:0,width:"100%",height:"5px","z-index":13,cursor:"pointer"},".wpaudio-meta":{margin:"3px 0 0 19px","font-size":"11px",color:_wpaudio.style.sub_color},".wpaudio-download":{float:"right"}},head:{".wpaudio-container a:visited":{color:_wpaudio.style.link_color},".wpaudio-container a:hover":{color:_wpaudio.style.link_hover_color}},default:{border:0,margin:0,padding:0}};(function($){var css=$.map($.extend({},_wpaudio.css.inline,_wpaudio.css.head),function(rules,selector){var renderedRules=$.map($.extend({},_wpaudio.css.default,rules),function(val,prop){return[prop,val].join(":")}).join(";");return selector+"{"+renderedRules+"}"}).join("");$("head").append('<style type="text/css">'+css+"</style>")})(jQuery);function Wpaudio(elem){this.elem=elem;var player;this.player=player;var $el=jQuery(elem);function getUrl(){return _wpaudio.enc[elem.id]?_wpaudio.enc[elem.id]:elem.href}this.getUrl=getUrl;function isPlaying(){return player.isPlaying()}this.isPlaying=isPlaying;function play(){jQuery(".wpaudio-playing").each(function(i,v){v.wpaudio.pause()});player.play();$el.addClass("wpaudio-playing").parent().find(".wpaudio-slide:hidden").slideDown()}this.play=play;function pause(){player.pause();$el.removeClass("wpaudio-playing")}this.pause=pause;function seek(percent){if(!isPlaying()){play()}player.seek(percent)}this.seek=seek;function updateDisplay(){var info=player.getInfo();$el[info.is_playing?"addClass":"removeClass"]("wpaudio-playing");var button_url=_wpaudio.url+(info.is_playing?"/wpaudio-pause.png":"/wpaudio-play.png");if(button_url!==$el.children(".wpaudio-play").attr("src")){var url_pieces=button_url.split("-");$el.children(".wpaudio-play").attr({alt:"P"+url_pieces[url_pieces.length-1].split(".")[0].slice(1),src:button_url})}$el.parent().find(".wpaudio-bar-position").css({left:String(info.playable_start/info.duration||0)+"%",width:String((info.position-info.playable_start)/info.duration*100||0)+"%"});$el.parent().find(".wpaudio-bar-playable").css({left:String(info.playable_start/info.duration||0)+"%",width:String((info.playable_end-info.playable_start)/info.duration*100||0)+"%"});var min=Math.floor(info.position/60);var sec=Math.floor(info.position%60);var time_string=min+":";if(sec<10){time_string+="0"}time_string+=sec;$el.parent().find(".wpaudio-position").text(time_string)}this.updateDisplay=updateDisplay;var slider='<div class="wpaudio-slide">'+'<div class="wpaudio-bar">'+'<div class="wpaudio-bar-playable"></div>'+'<div class="wpaudio-bar-position"></div>'+'<div class="wpaudio-bar-click"></div>'+"</div>"+'<div class="wpaudio-meta">'+String($el.hasClass("wpaudio-nodl")?"":'<a class="wpaudio-download" href="'+elem.href+'">Download</a>')+'<div class="wpaudio-position"></div>'+"</div>"+"</div>";$el.click(function(){isPlaying()?pause():play();jQuery(this).blur();return false}).prepend('<img class="wpaudio-play" alt="Play" src="'+_wpaudio.url+'/wpaudio-play.png"/>').wrap('<span class="wpaudio-container"></span>').after(slider);$el.parent().children(".wpaudio-slide").width($el.width());$el.parent().find(".wpaudio-bar-click").mouseup(function(e){if(e.pageX){var percent=(e.pageX-jQuery(this).offset().left)/jQuery(this).width();seek(percent)}});player=new this.Player(this)}function WpaudioHTML5(parent){var player=document.createElement("audio");this.player=player;this.parent=parent;player.src=parent.getUrl();player.volume=1;jQuery(player).bind("play pause ended timeupdate progress canplaythrough",parent.updateDisplay);function isPlaying(){return!player.paused}this.isPlaying=isPlaying;function getInfo(){var pos,dur,start,end;try{pos=player.currentTime;dur=player.duration;start=player.buffered.start(0);end=player.buffered.end(0)}catch(e){pos=0;dur=0;start=0;end=0}return{is_playing:isPlaying(),position:pos,duration:dur,playable_start:start,playable_end:end}}this.getInfo=getInfo;function play(){player.play()}this.play=play;this.pause=function(){player.pause()};this.seek=function(fraction){player.currentTime=player.duration*fraction};return this}function wpaudioReady(){jQuery.each(_wpaudio.css.inline,function(css_group,css_rules){jQuery(css_group).css(css_rules);if(!css_rules.margin){jQuery(css_group).css("margin",0)}if(!css_rules.border){jQuery(css_group).css("border",0)}if(!css_rules.padding){jQuery(css_group).css("padding",0)}});if(jQuery(".wpaudio-autoplay:first").length){jQuery(".wpaudio-autoplay:first")[0].wpaudio.play()}}jQuery(document).ready(function(){var wpaudio_selector=".wpaudio, .wpaudio-autoplay";if(_wpaudio.convert_mp3_links){jQuery('a[href$=".mp3"]').addClass("wpaudio")}var _wpaudio_html5=document.createElement("audio");if(!!(_wpaudio_html5.canPlayType&&_wpaudio_html5.canPlayType("audio/mpeg;").replace(/no/,""))){Wpaudio.prototype.Player=WpaudioHTML5;jQuery(wpaudio_selector).each(function(i,v){v.wpaudio=new Wpaudio(v)});wpaudioReady()}});(function(){var play=new Image,pause=new Image;play.src=_wpaudio.url+"/wpaudio-play.png";jQuery(play).load(function(){pause.src=_wpaudio.url+"/wpaudio-pause.png"})})();